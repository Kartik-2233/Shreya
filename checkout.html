<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | Shreya Healthcare</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="loader"><div class="spinner"></div></div>
    
    <nav>
        <a href="index.html" class="logo">Shreya Healthcare</a>
        <a href="cart.html" style="text-decoration:none; color:var(--secondary);"><i class="fas fa-arrow-left"></i> Back to Cart</a>
    </nav>

    <div class="container" style="max-width: 1000px;">
        <div class="grid" style="grid-template-columns: 1fr 350px; align-items: start;">
            
            <div class="card" style="text-align: left;">
                <h2 style="margin-bottom: 20px;">Shipping Details</h2>
                <form id="checkoutForm">
                    <div style="margin-bottom: 15px;">
                        <label>Full Name</label>
                        <input type="text" id="name" required style="width:100%; padding:10px; margin-top:5px; border:1px solid #ddd; border-radius:5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label>Email Address</label>
                        <input type="email" id="email" required style="width:100%; padding:10px; margin-top:5px; border:1px solid #ddd; border-radius:5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label>Phone Number</label>
                        <input type="tel" id="phone" pattern="[0-9]{10}" placeholder="10-digit mobile number" required style="width:100%; padding:10px; margin-top:5px; border:1px solid #ddd; border-radius:5px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label>Delivery Address</label>
                        <textarea id="address" rows="4" required style="width:100%; padding:10px; margin-top:5px; border:1px solid #ddd; border-radius:5px;"></textarea>
                    </div>
                    <button type="submit" class="btn" style="width:100%; padding:15px;">Place Order (Cash on Delivery)</button>
                </form>
            </div>

            <div class="card" style="background: var(--light); text-align: left;">
                <h3>Order Summary</h3>
                <hr style="margin: 15px 0; border: 0; border-top: 1px solid #ddd;">
                <div id="summary-items">
                    </div>
                <hr style="margin: 15px 0; border: 0; border-top: 1px solid #ddd;">
                <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:1.2rem;">
                    <span>Total:</span>
                    <span>₹<span id="summary-total">0</span></span>
                </div>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const summaryContainer = document.getElementById('summary-items');
            const totalEl = document.getElementById('summary-total');
            let total = 0;

            if (cart.length === 0) {
                window.location.href = 'products.html';
                return;
            }

            summaryContainer.innerHTML = cart.map(item => {
                total += item.price * item.quantity;
                return `<p style="display:flex; justify-content:space-between; margin-bottom:10px;">
                            <span>${item.name} x ${item.quantity}</span>
                            <span>₹${item.price * item.quantity}</span>
                        </p>`;
            }).join('');
            totalEl.innerText = total;
        });

        document.getElementById('checkoutForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // Simple validation check
            const phone = document.getElementById('phone').value;
            if(phone.length !== 10) {
                alert("Please enter a valid 10-digit phone number.");
                return;
            }

            alert("Thank you! Your order has been placed successfully via Cash on Delivery.");
            localStorage.removeItem('cart');
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>